{
  "info": {
    "_postman_id": "hiiretail-devkit-negative-tests",
    "name": "Hii Retail DevKit - Negative Tests",
    "description": "Negative tests to verify error handling. These tests send invalid payloads and verify appropriate error responses.",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Invalid JSON",
      "item": [
        {
          "name": "Malformed JSON - Missing closing brace",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 400', function () {",
                  "    pm.expect(pm.response.code).to.equal(400);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"id\": \"test-item\",\n  \"name\": \"Test Item\""
            },
            "url": {
              "raw": "{{baseUrl}}/api/v2/bu-g-items",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v2", "bu-g-items"]
            }
          }
        },
        {
          "name": "Empty body",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 400 or 415', function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([400, 415]);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": ""
            },
            "url": {
              "raw": "{{baseUrl}}/api/v2/bu-g-items",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v2", "bu-g-items"]
            }
          }
        }
      ]
    },
    {
      "name": "Missing Required Fields - Items",
      "item": [
        {
          "name": "Item - Missing id",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 400 or 422', function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([400, 422]);",
                  "});",
                  "",
                  "pm.test('Error mentions missing field', function () {",
                  "    var responseText = pm.response.text().toLowerCase();",
                  "    pm.expect(responseText).to.include('id');",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"name\": \"Test Item Without ID\",\n  \"type\": \"STOCK_ITEM\",\n  \"status\": \"ACTIVE\",\n  \"businessUnitGroupId\": \"{{businessUnitGroupId}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v2/bu-g-items",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v2", "bu-g-items"]
            }
          }
        },
        {
          "name": "Item - Missing name",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 400 or 422', function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([400, 422]);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"id\": \"test-item-no-name\",\n  \"type\": \"STOCK_ITEM\",\n  \"status\": \"ACTIVE\",\n  \"businessUnitGroupId\": \"{{businessUnitGroupId}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v2/bu-g-items",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v2", "bu-g-items"]
            }
          }
        },
        {
          "name": "Item - Missing businessUnitGroupId",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 400 or 422', function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([400, 422]);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"id\": \"test-item-no-bug\",\n  \"name\": \"Test Item Without BUG\",\n  \"type\": \"STOCK_ITEM\",\n  \"status\": \"ACTIVE\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v2/bu-g-items",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v2", "bu-g-items"]
            }
          }
        }
      ]
    },
    {
      "name": "Missing Required Fields - Price Specifications",
      "item": [
        {
          "name": "Price - Missing itemId",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 400 or 422', function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([400, 422]);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"id\": \"test-price-no-item\",\n  \"type\": \"NORMAL\",\n  \"value\": 99.99,\n  \"currencyId\": \"SEK\",\n  \"status\": \"ACTIVE\",\n  \"businessUnitGroupId\": \"{{businessUnitGroupId}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v2/bu-g-price-specifications",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v2", "bu-g-price-specifications"]
            }
          }
        },
        {
          "name": "Price - Missing value",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 400 or 422', function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([400, 422]);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"id\": \"test-price-no-value\",\n  \"itemId\": \"erp-item-10001\",\n  \"type\": \"NORMAL\",\n  \"currencyId\": \"SEK\",\n  \"status\": \"ACTIVE\",\n  \"businessUnitGroupId\": \"{{businessUnitGroupId}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v2/bu-g-price-specifications",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v2", "bu-g-price-specifications"]
            }
          }
        }
      ]
    },
    {
      "name": "Missing Required Fields - Identifiers",
      "item": [
        {
          "name": "Identifier - Missing itemId",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 400 or 422', function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([400, 422]);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"id\": \"test-ident-no-item\",\n  \"value\": \"1234567890123\",\n  \"type\": \"GTIN13\",\n  \"status\": \"ACTIVE\",\n  \"businessUnitGroupId\": \"{{businessUnitGroupId}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v2/bu-g-item-identifiers",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v2", "bu-g-item-identifiers"]
            }
          }
        },
        {
          "name": "Identifier - Missing value",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 400 or 422', function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([400, 422]);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"id\": \"test-ident-no-value\",\n  \"itemId\": \"erp-item-10001\",\n  \"type\": \"GTIN13\",\n  \"status\": \"ACTIVE\",\n  \"businessUnitGroupId\": \"{{businessUnitGroupId}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v2/bu-g-item-identifiers",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v2", "bu-g-item-identifiers"]
            }
          }
        }
      ]
    },
    {
      "name": "Invalid Data Types",
      "item": [
        {
          "name": "Item - Invalid type enum",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 400 or 422', function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([400, 422]);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"id\": \"test-item-bad-type\",\n  \"name\": \"Test Item Bad Type\",\n  \"type\": \"INVALID_TYPE\",\n  \"status\": \"ACTIVE\",\n  \"businessUnitGroupId\": \"{{businessUnitGroupId}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v2/bu-g-items",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v2", "bu-g-items"]
            }
          }
        },
        {
          "name": "Item - Invalid status enum",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 400 or 422', function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([400, 422]);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"id\": \"test-item-bad-status\",\n  \"name\": \"Test Item Bad Status\",\n  \"type\": \"STOCK_ITEM\",\n  \"status\": \"INVALID_STATUS\",\n  \"businessUnitGroupId\": \"{{businessUnitGroupId}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v2/bu-g-items",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v2", "bu-g-items"]
            }
          }
        },
        {
          "name": "Price - String instead of number for value",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 400 or 422', function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([400, 422]);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"id\": \"test-price-string-value\",\n  \"itemId\": \"erp-item-10001\",\n  \"type\": \"NORMAL\",\n  \"value\": \"not-a-number\",\n  \"currencyId\": \"SEK\",\n  \"status\": \"ACTIVE\",\n  \"businessUnitGroupId\": \"{{businessUnitGroupId}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v2/bu-g-price-specifications",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v2", "bu-g-price-specifications"]
            }
          }
        },
        {
          "name": "Price - Negative value",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 400 or 422', function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([400, 422]);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"id\": \"test-price-negative\",\n  \"itemId\": \"erp-item-10001\",\n  \"type\": \"NORMAL\",\n  \"value\": -50.00,\n  \"currencyId\": \"SEK\",\n  \"status\": \"ACTIVE\",\n  \"businessUnitGroupId\": \"{{businessUnitGroupId}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v2/bu-g-price-specifications",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v2", "bu-g-price-specifications"]
            }
          }
        },
        {
          "name": "Item - Boolean as string",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 400 or 422', function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([400, 422]);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"id\": \"test-item-bool-string\",\n  \"name\": \"Test Item Bool String\",\n  \"type\": \"STOCK_ITEM\",\n  \"status\": \"ACTIVE\",\n  \"availableInPos\": \"yes\",\n  \"businessUnitGroupId\": \"{{businessUnitGroupId}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v2/bu-g-items",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v2", "bu-g-items"]
            }
          }
        }
      ]
    },
    {
      "name": "Invalid Endpoints",
      "item": [
        {
          "name": "Non-existent endpoint",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 404', function () {",
                  "    pm.expect(pm.response.code).to.equal(404);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"id\": \"test\",\n  \"name\": \"Test\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v2/non-existent-endpoint",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v2", "non-existent-endpoint"]
            }
          }
        },
        {
          "name": "Wrong API version",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 404', function () {",
                  "    pm.expect(pm.response.code).to.equal(404);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"id\": \"test-item\",\n  \"name\": \"Test Item\",\n  \"type\": \"STOCK_ITEM\",\n  \"status\": \"ACTIVE\",\n  \"businessUnitGroupId\": \"{{businessUnitGroupId}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v99/bu-g-items",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v99", "bu-g-items"]
            }
          }
        },
        {
          "name": "Wrong HTTP method (GET on POST-only endpoint)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 404 or 405', function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([404, 405]);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "GET",
            "header": [],
            "url": {
              "raw": "{{baseUrl}}/api/v2/bu-g-items",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v2", "bu-g-items"]
            }
          }
        }
      ]
    },
    {
      "name": "Content-Type Issues",
      "item": [
        {
          "name": "Missing Content-Type header",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 400 or 415', function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([400, 415]);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"id\": \"test-item\",\n  \"name\": \"Test Item\",\n  \"type\": \"STOCK_ITEM\",\n  \"status\": \"ACTIVE\",\n  \"businessUnitGroupId\": \"{{businessUnitGroupId}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v2/bu-g-items",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v2", "bu-g-items"]
            }
          }
        },
        {
          "name": "Wrong Content-Type (text/plain)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 400 or 415', function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([400, 415]);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "text/plain"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"id\": \"test-item\",\n  \"name\": \"Test Item\",\n  \"type\": \"STOCK_ITEM\",\n  \"status\": \"ACTIVE\",\n  \"businessUnitGroupId\": \"{{businessUnitGroupId}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v2/bu-g-items",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v2", "bu-g-items"]
            }
          }
        }
      ]
    },
    {
      "name": "Business Unit vs Business Unit Group",
      "item": [
        {
          "name": "BUG endpoint with businessUnitId (should fail)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 400 or 422', function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([400, 422]);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"id\": \"test-item-wrong-scope\",\n  \"name\": \"Test Item Wrong Scope\",\n  \"type\": \"STOCK_ITEM\",\n  \"status\": \"ACTIVE\",\n  \"businessUnitId\": \"{{businessUnitId}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v2/bu-g-items",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v2", "bu-g-items"]
            },
            "description": "Sending businessUnitId to a BUG-level endpoint should fail as it expects businessUnitGroupId"
          }
        },
        {
          "name": "BU endpoint with businessUnitGroupId (should fail)",
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Status code is 400 or 422', function () {",
                  "    pm.expect(pm.response.code).to.be.oneOf([400, 422]);",
                  "});"
                ],
                "type": "text/javascript"
              }
            }
          ],
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"id\": \"test-item-wrong-scope-2\",\n  \"name\": \"Test Item Wrong Scope 2\",\n  \"type\": \"STOCK_ITEM\",\n  \"status\": \"ACTIVE\",\n  \"businessUnitGroupId\": \"{{businessUnitGroupId}}\"\n}"
            },
            "url": {
              "raw": "{{baseUrl}}/api/v2/bu-items",
              "host": ["{{baseUrl}}"],
              "path": ["api", "v2", "bu-items"]
            },
            "description": "Sending businessUnitGroupId to a BU-level endpoint should fail as it expects businessUnitId"
          }
        }
      ]
    }
  ]
}
